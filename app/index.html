<!DOCTYPE html>
<html class="autoSize">
	<head>
	    <meta charset="utf-8">
	    <title>Douban FM</title>
	    <link rel="stylesheet" type="text/css" href="styles/main.css">
	    <script type="text/javascript" src="scripts/libs/angular.js"></script>
	    <script type="text/javascript" src="scripts/doubanAPI.js"></script>
	    <script type="text/javascript" src="scripts/fm.js"></script>
	</head>
	<body ng-app ng-csp class="autoSize" ng-controller="fmCtrl" style="display: -webkit-box; -webkit-box-orient: vertical;">
	    <div id="menu" style="display: -webkit-box; -webkit-box-align: center; -webkit-box-pack: justify;">
	    	<h1>Douban FM</h1>
	    	<div ng-show="!isLoggedIn">
	    		<a href="" ng-click="showLoginDialog = 'show';"> Login </a>
	    	</div>
	    	<span ng-show="isLoggedIn">{{userName}}</span>
	    </div>
		<div style="-webkit-box-flex:1; overflow: auto; -webkit-box-sizing: border-box;">
			<div style="display: -webkit-box; height: 100%; width: 100%; -webkit-box-sizing: border-box;">
	    		<div style="overflow: auto;">
		    		<p>Channels</p>
			    	<form>
			    		<div ng-repeat="channel in channels">
			    			<input type="radio" name="channelName" value={{$index}} id="channel-{{$index}}" ng-model="$parent.currentChannelIndex">
                            <label for="channel-{{$index}}">
                                {{channel.name}}
                            </label>
                            <br>
			    		</div>
			    	</form>
		    	</div>
		    	<div style="overflow: auto">
		    		<p>Songs</p>
		    		<form>
		    			<div ng-repeat="song in songs" >
		    				<input type="radio" name="songName" value={{$index}} id="song-{{$index}}" ng-model="$parent.currentSongIndex">
                            <label for="song-{{$index}}">
                                {{song.title}} by {{song.artist}}
                            </label>
                            <br>
		    			</div>
		    		</form>
		    	</div>
		    </div>
    	</div>
	    <div>
    		<audio id="player" controls autoplay name="media" src={{songs[currentSongIndex].url}}>
    		</audio>
    	</div>
    	<div class="login-{{showLoginDialog}}">
    		<div style="position: absolute; left: 0px; top: 0px; width: 100%; height: 100%; background-color: #ffffff; opacity: 0.97; z-index: 1;" ng-click="showLoginDialog = 'hide';"></div>
    		<div style="display: -webkit-box; z-index: 2; position: relative">
	    		<form>
	    			Username: <input type="text" name="username" ng-model="username"><br>
	    			Password: <input type="password" name="password" ng-model="password"><br>
	    			<input type="submit" value="Login" ng-click="login()">
	    		</form> 
    		</div>
	    </div>
	</body>
</html>